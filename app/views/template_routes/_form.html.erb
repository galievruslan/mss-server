<% if @template_route.errors.any? %>
    <div class="alert alert-error">
    	<button type="button" class="close" data-dismiss="alert">&times;</button>
      <h4><%=t('errors.title')%></h4>
      <ul>
      <% @template_route.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

<%= nested_form_for(@template_route) do |f| %>
	<div class="tabbable">
	  <ul class="nav nav-tabs">
	    <li class="active"><a href="#tab1" data-toggle="tab"><%= t(:route)%></a></li>
	    <li><a href="#tab2" data-toggle="tab"><%= t(:route_points)%></a></li>
	  </ul>
	  <div class="tab-content">
	    <div class="tab-pane active" id="tab1">		
			  <div class="field">
			    <%= f.label :manager_id, t(:manager) %>
			    <%= f.select(:manager_id, @managers.collect  {|p| [ p.name, p.id ]}, :include_blank => t(:select_manager)) %>
			  </div>
			  <div class="field">
			    <%= f.label :day_of_week, t(:day_of_week) %>
			    <%= f.select(:day_of_week, @days_of_week.collect  {|p| [ t(day_name(p)), p ]}, :include_blank => t(:select_day_of_week)) %>
			  </div>
			  <div class="field form-inline">    
			    <%= f.check_box :validity %>
			    <%= f.label :validity, t(:validity) %><br /><br />
			  </div>
			</div>
			<div class="tab-pane" id="tab2">				
				<table id="table" class="table table-striped table-hover">
					<thead>
						<tr>
							<th><%= t(:shipping_address)%></th>
							<th><%= t(:validity) %></th>						
						</tr>
					</thead>
					<tbody>
						<%= f.fields_for :template_route_points, :wrapper => false do |template_route_point| %>
							<tr class="fields">
								<td><%= template_route_point.select :shipping_address_id , @shipping_addresses.collect  {|p| [ p.name, p.id ] }, {:include_blank => t(:select_shipping_address)} %></td>
								<td><%= template_route_point.check_box :validity%></td>
							</tr>	
						<% end %>
					</tbody>
				</table>
				<p><%= f.link_to_add t(:add), :template_route_points, :class =>'btn', :data => { :target => "#table" } %></p>	
			</div>
			<div class="actions">
		    <%= f.submit(t(:save), :class =>'btn') %>
		  </div>
		</div>
	</div>
<% end %>
