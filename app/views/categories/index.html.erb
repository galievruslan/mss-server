<h3>Listing categories</h3>

<button type="button" class="btn btn-primary" data-toggle="collapse" data-target="#demo">
  <i class="icon-filter icon-white"></i> Filter:
</button>

<div id="demo" class="collapse">
	<br>
	<div class='well well-small'>
		<%= search_form_for @search, class: "form-horizontal" do |f| %>
		  <div class="control-group">
		  	<%= f.label :name_cont, 'Name:', class: "control-label"%>
		  	<div class="controls">
		  		<%= f.text_field :name_cont, class: 'search-field'%>
		  	</div>
		  </div>
		  <div class="control-group">
		  	<%= f.label :external_key_cont, 'External key:', class: "control-label"%>
		  	<div class="controls">
		  		<%= f.text_field :external_key_cont, class: 'search-field'%>
		  	</div>
		  </div>
		  <div class="control-group">
		  	<%= f.label :parent_name_cont, 'Parent name:', class: "control-label"%>
		  	<div class="controls">
		  		<%= f.text_field :parent_name_cont, class: 'search-field'%>
		  	</div>
		  </div>
		  <div class="control-group">	  	
		  		<%= f.submit "Search", class: 'btn btn-info' %>
		  		<button type="button" class='btn btn-info' id="q_reset">Reset</button>   	
		  </div>	
		<%end%>
	</div>
</div>

<table class="table table-striped table-hover">
	<thead>
	  <tr>
	    <th><%= sort_link @search, :name, "Name" %></th>
	    <th><%= sort_link @search, :external_key, "External Key" %></th>
	    <th><%= sort_link @search, :parent_name, "Parrent category" %></th>	    
	    <th><%= sort_link @search, :validity, "Validity" %></th>
	    <th colspan="3">Actions</th>
	  </tr>
	</thead>
	<tbody>
		<% @categories.each do |category| %>
		  <tr>
		    <td><%= category.name %></td>
		    <td><%= category.external_key %></td>
		    <td><%= category.parent.name if category.parent %></td>		    
		    <td><i class=<%=category.validity ? 'icon-ok-sign' : 'icon-remove-circle'%>></i></td>
		    <td><%= link_to 'Show', category %></td>
		    <td><%= link_to 'Edit', edit_category_path(category) %></td>
		    <td><%= link_to 'Change validity', category, method: :delete, data: { confirm: 'Are you sure?' } %></td>
		  </tr>
		<% end %>
</tbody>
</table>

<%= paginate @categories%>

<%= link_to 'New Category', new_category_path, class: 'btn' %>
